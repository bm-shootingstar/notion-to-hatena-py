# タスクリスト

- [x] プロジェクト設定
  - [x] `uv init` で `pyproject.toml` を初期化
  - [x] `uv venv` で仮想環境を構築
  - [x] 必要なライブラリをインストール (`notion-client`, `requests`, `python-dotenv`)
  - [x] `.env` ファイルで機密情報を管理
- [x] Notion モジュール
  - [x] Notion ページのコンテンツを取得する関数を実装
  - [x] Notion ページのタイトルを取得する関数を実装
  - [x] Notion ブロックのデータ構造を定義
- [x] はてなブログモジュール
  - [x] はてなブログに記事を投稿する関数を実装
  - [x] はてなフォトライフに画像をアップロードする機能を追加
  - [x] 下書き投稿と公開投稿を選択できる機能を追加
  - [x] CDATAセクションを利用してHTMLエスケープを回避する処理を追加
- [x] 変換モジュール
  - [x] Notion ブロックをはてなブログ形式（Markdown）に変換するロジックを実装
  - [x] 画像 URL をはてなフォトライフの URL に置換する処理を追加
  - [x] 段落内で改行されている場合、markdown の形式に従って 2 つスペースを追加する処理を実装
  - [x] リンク、ブックマーク、リンクプレビュー、埋め込みをはてなブログの埋め込み形式に変換する処理を追加
  - [x] コールアウトをCSSで装飾されたHTMLに変換する処理を追加
  - [x] テーブルをHTMLに変換する処理を追加
- [x] メインスクリプト
  - [x] 全体の処理をまとめるメインスクリプトを作成
  - [x] Notion ページ URL/ID をコマンドライン引数で受け取る機能を追加
  - [x] URL からページ ID をパースし、ID を検証する機能を追加
  - [x] print を logger に置き換え
- [x] ドキュメント
  - [x] `TASKS.md` を作成
  - [x] `SPECIFICATION.md` を作成
  - [x] `CHANGELOG.md` を作成
  - [x] `README.md` を作成
  - [x] `README.md` に Notion トークン取得方法を追記
  - [x] `README.md` に公開オプションについて追記
  - [x] `README.md` にコールアウトの絵文字リストを追記
  - [x] `README.md` にライセンス情報を追記
  - [x] ドキュメントを `documents` フォルダに移動
  - [x] MITライセンスファイルを追加
- [x] Linter
  - [x] `ruff` を導入
  - [x] `ruff` のルールに合わせてコードを修正
- [x] その他
  - [x] `.gitignore` に `.ruff_cache` を追加
- [x] GUI機能の追加
  - [x] PySide6の導入
  - [x] URL/ID入力フィールドの実装
  - [x] 公開設定チェックボックスの実装
  - [x] 実行ボタンとバックグラウンド処理の実装
- [x] GUIレイアウト修正
  - [x] 縦方向のサイズを適切に調整（上詰め、または固定）
- [x] MVCリファクタリング
  - [x] ディレクトリ構造の再設計 (`models`, `views`, `controllers`)
  - [x] `notion_fetcher.py`, `hatena_poster.py`, `converter.py` を Model 層へ移動
  - [x] `gui_app.py` を View 層へ移動
  - [x] ビジネスロジック (`actions.py`) を Controller/Service 層へ統合
  - [x] `main.py` の修正

## 今後の予定