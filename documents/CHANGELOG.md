# 編集履歴

## 2025-12-31

- **機能追加**
  - PySide6を使用したGUIモードを追加。引数なしで `main.py` を実行すると起動する。
  - GUIにNotion URL/ID入力、公開設定チェックボックス、実行ボタンを実装。
  - Notion APIキーが設定されていない場合、またはNotionページID/URLが不正な場合に、GUI上で詳細なエラーメッセージをダイアログ表示するように改善。
  - エラーハンドリングのため、カスタム例外（`NotionAPIKeyError`, `NotionPageIDError`）を導入。
- **リファクタリング**
  - MVCアーキテクチャへの移行を実施。`src/models`, `src/views`, `src/controllers` にディレクトリを分割。
  - `src/gui_app.py` のレイアウトを修正し、ウィンドウサイズを固定化。
  - `notion_fetcher.py` と `main_controller.py` のエラー処理を、`sys.exit()` からカスタム例外をraiseする形式に変更。
- **プロジェクト管理**
  - `GEMINI.md` を更新し、日本語での応答およびコメント作成に関するルールを追加。
- **配布**
  - PyInstaller を導入し、スタンドアロン実行ファイルを生成するための `notion_to_hatena.spec` を作成。
  - `.env` ファイルを実行ファイルと同じディレクトリに配置することで動作するように環境変数読み込みロジックを確認。

## 2025-08-19

- **機能追加**
  - Notion のテーブルを HTML の table タグに変換する機能を追加。

## 2025-07-20

- **リファクタリング**

  - プロジェクト名を `notion-to-hatena` から `notion-to-hatena-py` に変更。
  - `pyproject.toml` と `README.md` のプロジェクト名を更新。

- **ドキュメント**
  - MIT ライセンスファイルを追加。
  - `README.md` にライセンス情報を追記。
- **その他**
  - `.ruff_cache` を `.gitignore` に追加。

## 2025-07-18

- **機能追加**
  - Notion のコールアウトを、はてなブログで CSS を使って装飾された HTML 形式に変換する機能を追加。
  - Notion の埋め込み (`embed`) をはてなブログの埋め込み形式 (`[URL:embed]`) に変換する機能を追加。
  - Notion のリンクプレビュー (`link_preview`) をはてなブログの埋め込み形式 (`[URL:embed]`) に変換する機能を追加。
  - Notion のブックマーク (`bookmark`) をはてなブログの埋め込み形式に変換する機能を追加。
  - 段落内のテキストリンクをはてなブログのタイトル付きリンク形式 (`[URL:title=テキスト]`) に変換する機能を追加。
  - ドキュメントフォルダ (`documents`) を作成し、仕様書とタスクリストを移動。
  - Notion ページのタイトルを自動で取得し、記事タイトルとして使用する機能を追加。
  - `print`でのログ出力を標準の`logging`モジュールに置き換え。
  - はてなブログへの投稿時に、下書き (`draft`) か公開 (`publish`) かを選択できる機能を追加。
  - Notion の画像 URL をはてなフォトライフにアップロードし、永続的な URL に変換する機能を追加。
- **修正**
  - はてなブログ API への送信時に CDATA セクションを使用し、HTML がエスケープされる問題を修正。
  - コールアウト用の CSS セレクタの特異性を高め、スタイルが正しく適用されるように修正。
  - Notion の URL からページ ID を抽出するロジックを改善。
- **ドキュメント**
  - `README.md` にコールアウトの対応絵文字リストを追記。
  - コールアウト用の CSS ファイル (`hatena_design_css.css`) を作成。
  - `README.md` に Notion トークンの取得方法と、公開オプションについての説明を追記。
  - `CHANGELOG.md` を作成。
  - 仕様書と編集履歴に、コールアウト機能の利用には CSS の適用が必要である旨を追記。